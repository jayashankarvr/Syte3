{"version":3,"sources":["pages/Spotify/PlayContext.js","pages/Spotify/RecentTracks.js","pages/Spotify/TopArtists.js","pages/Spotify/TopTracks.js","pages/Spotify/Top.js","pages/Spotify/index.js","components/Error/index.js","components/Error/Error.module.css","hooks/User.js","pages/Spotify/Spotify.module.css"],"names":["PlayContext","React","createContext","RecentTracks","useState","tracks","setTracks","error","setError","context","useContext","fetchTracks","a","fetch","process","response","json","useEffect","className","styles","recentTracks","length","map","track","key","id","date","href","url","album","onClick","e","preventDefault","onPlayTrack","src","image","alt","title","preview_url","playIcon","playing","artist","formatDistanceToNow","parseISO","TopArtists","artists","topArtists","name","loader","placeholder","type","info","genres","genre","TopTracks","topTracks","Top","top","setTop","fetchTop","Spotify","useUser","user","setPlaying","audio","useRef","Audio","currentAudio","current","onended","paused","pause","Error","message","page","profile","picture","Provider","value","playTrack","setAttribute","play","module","exports","setUser","fetchUser"],"mappings":"gNAEaA,EAAcC,IAAMC,gB,yBCKlB,SAASC,IAAgB,IAAD,EACPC,mBAAS,IADF,mBAC5BC,EAD4B,KACpBC,EADoB,OAETF,oBAAS,GAFA,mBAE5BG,EAF4B,KAErBC,EAFqB,KAG7BC,EAAUC,qBAAWV,GAErBW,EAAW,uCAAG,8BAAAC,EAAA,+EAEWC,MAAM,GAAD,OAAIC,8BAAJ,sBAFhB,cAENC,EAFM,gBAGSA,EAASC,OAHlB,OAGNX,EAHM,OAIZC,EAAUD,GAJE,kDAMZG,GAAS,GANG,0DAAH,qDAcjB,OAJAS,qBAAU,WACNN,MACD,IAGC,yBAAKO,UAAWC,IAAOC,cACnB,6CACCb,GAAS,uBAAGW,UAAWC,IAAOZ,OAArB,kCACTF,GAAUA,EAAOgB,OACd,4BACKhB,EAAOiB,KAAI,SAAAC,GAAK,OACb,wBAAIC,IAAG,UAAKD,EAAME,GAAX,YAAiBF,EAAMG,OAC1B,uBACIC,KAAMJ,EAAMK,IACZV,UAAWC,IAAOU,MAClBC,QAAS,SAAAC,GACLA,EAAEC,iBACFvB,EAAQwB,YAAYV,KAExB,kBAAC,IAAD,CAAKW,IAAKX,EAAMY,MAAOC,IAAKb,EAAMc,QACjCd,EAAMe,aACH,0BAAMpB,UAAS,UAAKC,IAAOoB,SAAZ,YAAwB9B,EAAQ+B,SAAW/B,EAAQ+B,UAAYjB,EAAME,GAAKN,IAAOqB,QAAU,KACrG/B,EAAQ+B,SAAW/B,EAAQ+B,UAAYjB,EAAME,GAAK,kBAAC,IAAD,MAAgB,kBAAC,IAAD,QAI/E,uBAAGE,KAAMJ,EAAMK,IAAKV,UAAWC,IAAOkB,OACjCd,EAAMc,OAEX,0BAAMnB,UAAWC,IAAOsB,QAASlB,EAAMkB,QACvC,0BAAMvB,UAAWC,IAAOO,MAAOgB,YAAoBC,YAASpB,EAAMG,OAAlE,aAIZ,MCnDD,SAASkB,EAAT,GAAkC,IAAZC,EAAW,EAAXA,QACjC,OACI,yBAAK3B,UAAWC,IAAO2B,YACnB,2CACCD,GAAWA,EAAQxB,OAChB,4BACKwB,EAAQvB,KAAI,SAAAmB,GAAM,OACf,wBAAIjB,IAAKiB,EAAOhB,IACZ,uBAAGE,KAAMc,EAAOb,KACZ,kBAAC,IAAD,CACIM,IAAKO,EAAON,MACZC,IAAKK,EAAOM,KACZC,OACI,yBAAK9B,UAAWC,IAAO8B,aACnB,kBAAC,IAAD,CAAMC,KAAK,gBAK3B,yBAAKhC,UAAWC,IAAOgC,MACnB,yBAAKjC,UAAWC,IAAO4B,MAAON,EAAOM,MACpCN,EAAOW,QAAUX,EAAOW,OAAO/B,OAC5B,yBAAKH,UAAWC,IAAOkC,OAAiC,IAAzBZ,EAAOW,OAAO/B,OAAeoB,EAAOW,OAAO,GAAKX,EAAOW,OAAO,IAC7F,WAKpB,MC3BD,SAASE,EAAT,GAAgC,IAAXjD,EAAU,EAAVA,OAC1BI,EAAUC,qBAAWV,GAC3B,OACI,yBAAKkB,UAAWC,IAAOoC,WACnB,0CACClD,GAAUA,EAAOgB,OACd,4BACKhB,EAAOiB,KAAI,SAAAC,GAAK,OACb,wBAAIC,IAAKD,EAAME,IACX,uBAAGE,KAAMJ,EAAMK,IAAKV,UAAWC,IAAOU,OAClC,kBAAC,IAAD,CAAKK,IAAKX,EAAMY,MAAOC,IAAKb,EAAMc,SAErCd,EAAMe,aACH,0BACIpB,UAAS,UAAKC,IAAOoB,SAAZ,YAAwB9B,EAAQ+B,SAAW/B,EAAQ+B,UAAYjB,EAAME,GAAKN,IAAOqB,QAAU,IACpGV,QAAS,WACLrB,EAAQwB,YAAYV,KAEvBd,EAAQ+B,SAAW/B,EAAQ+B,UAAYjB,EAAME,GAAK,kBAAC,IAAD,MAAgB,kBAAC,IAAD,OAG3E,uBAAGE,KAAMJ,EAAMK,IAAKV,UAAWC,IAAO4B,MACjCxB,EAAMwB,MAEX,0BAAM7B,UAAWC,IAAOsB,QAASlB,EAAMkB,aAInD,MC7BD,SAASe,IAAO,IAAD,EACJpD,mBAAS,MADL,mBACnBqD,EADmB,KACdC,EADc,OAEAtD,oBAAS,GAFT,mBAEnBG,EAFmB,KAEZC,EAFY,KAiB1B,OAbAS,qBAAU,YACQ,uCAAG,8BAAAL,EAAA,+EAEcC,MAAM,GAAD,OAAIC,8BAAJ,iBAFnB,cAEHC,EAFG,gBAGSA,EAASC,OAHlB,OAGHyC,EAHG,OAITC,EAAOD,GAJE,kDAMTjD,GAAS,GANA,0DAAH,qDASdmD,KACD,IAGC,yBAAKzC,UAAWC,IAAOsC,KAClBlD,GACG,oCACI,2CACA,uBAAGW,UAAWC,IAAOZ,OAArB,4CAGPkD,EACG,oCACI,kBAACb,EAAD,CAAYC,QAASY,EAAMA,EAAIZ,QAAU,OACzC,kBAACS,EAAD,CAAWjD,OAAQoD,EAAMA,EAAIpD,OAAS,QAE1C,MC1BD,SAASuD,IAAW,IAAD,EACRC,YAAQ,WADA,mBACvBC,EADuB,KACjBvD,EADiB,OAEAH,mBAAS,MAFT,mBAEvBoC,EAFuB,KAEduB,EAFc,KAG1BC,EAAQC,iBAAO,IAAIC,OAEvBjD,qBAAU,WACN,IAAIkD,EAAeH,EAAMI,QAKzB,OAJAD,EAAaE,QAAU,WACnBN,EAAW,OAGR,WACCI,IAAiBA,EAAaG,QAC9BH,EAAaI,WAGtB,IAcH,OAAIhE,EACO,kBAACiE,EAAA,EAAD,CAAOC,QAAQ,qCAItB,yBAAKvD,UAAWC,IAAOuD,MAClBZ,GACG,yBAAK5C,UAAWC,IAAOwD,SACnB,uBAAGhD,KAAMmC,EAAKlC,IAAKV,UAAWC,IAAOyD,SACjC,kBAAC,IAAD,CAAK1C,IAAK4B,EAAKc,QAASxC,IAAI,qBAEhC,4BAAK0B,EAAKf,OAGlB,kBAAC/C,EAAY6E,SAAb,CACIC,MAAO,CACHtC,QAASA,EACTP,YA7BE,SAAAV,GACd,IAAMwD,EAAYvC,IAAYjB,EAAME,GAAKF,EAAME,GAAK,KACpDsC,EAAWgB,GACNf,EAAMI,QAAQE,QACfN,EAAMI,QAAQG,QAEdQ,IACAf,EAAMI,QAAQY,aAAa,MAAOzD,EAAMe,aACxC0B,EAAMI,QAAQa,WAuBV,kBAAC9E,EAAD,MACA,kBAACqD,EAAD,Q,yEC3DhB,qCAYegB,IATD,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACb,OACI,yBAAKvD,UAAWC,IAAOqD,OACnB,kCACA,2BAAIC,GAAW,qB,mBCN3BS,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,OAAS,wB,8GCCzC,SAAStB,EAAQX,GAAO,IAAD,EACV9C,mBAAS,MADC,mBAC3B0D,EAD2B,KACrBsB,EADqB,OAERhF,oBAAS,GAFD,mBAE3BG,EAF2B,KAEpBC,EAFoB,KAkBlC,OAdAS,qBAAU,YACS,uCAAG,gCAAAL,EAAA,sEAEJgB,EAFI,UAEKd,8BAFL,YAEsCoC,EAFtC,kBAGarC,MAAMe,GAHnB,cAGJb,EAHI,gBAISA,EAASC,OAJlB,OAIJ8C,EAJI,OAKVsB,EAAQtB,GALE,kDAOVtD,GAAS,GAPC,0DAAH,qDAUf6E,KACD,CAACnC,IAEG,CAACY,EAAMvD,K,mBCnBlB2E,EAAOC,QAAU,CAAC,KAAO,sBAAsB,MAAQ,uBAAuB,QAAU,yBAAyB,QAAU,yBAAyB,QAAU,yBAAyB,OAAS,wBAAwB,QAAU,yBAAyB,aAAe,8BAA8B,MAAQ,uBAAuB,SAAW,0BAA0B,QAAU,yBAAyB,MAAQ,uBAAuB,OAAS,wBAAwB,KAAO,sBAAsB,IAAM,qBAAqB,WAAa,4BAA4B,YAAc,6BAA6B,KAAO,sBAAsB,KAAO,sBAAsB,MAAQ,uBAAuB,YAAc,6BAA6B,OAAS,wBAAwB,UAAY,2BAA2B,eAAiB,gCAAgC,OAAS","file":"static/js/13.5c3a54b3.chunk.js","sourcesContent":["import React from 'react'\n\nexport const PlayContext = React.createContext()\n","import React, { useState, useEffect, useContext } from 'react'\nimport { parseISO, formatDistanceToNow } from 'date-fns'\nimport Img from 'react-image'\nimport { PlayContext } from './PlayContext'\nimport { PlayLogo, PauseLogo } from 'components/Icons'\nimport styles from './Spotify.module.css'\n\nexport default function RecentTracks() {\n    const [tracks, setTracks] = useState([])\n    const [error, setError] = useState(false)\n    const context = useContext(PlayContext)\n\n    const fetchTracks = async () => {\n        try {\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/spotify/activity`)\n            const tracks = await response.json()\n            setTracks(tracks)\n        } catch (error) {\n            setError(true)\n        }\n    }\n\n    useEffect(() => {\n        fetchTracks()\n    }, [])\n\n    return (\n        <div className={styles.recentTracks}>\n            <h3>Recent Tracks</h3>\n            {error && <p className={styles.error}>Unable to fetch recent tracks.</p>}\n            {tracks && tracks.length ? (\n                <ul>\n                    {tracks.map(track => (\n                        <li key={`${track.id}-${track.date}`}>\n                            <a\n                                href={track.url}\n                                className={styles.album}\n                                onClick={e => {\n                                    e.preventDefault()\n                                    context.onPlayTrack(track)\n                                }}>\n                                <Img src={track.image} alt={track.title} />\n                                {track.preview_url && (\n                                    <span className={`${styles.playIcon} ${context.playing && context.playing === track.id ? styles.playing : ''}`}>\n                                        {context.playing && context.playing === track.id ? <PauseLogo /> : <PlayLogo />}\n                                    </span>\n                                )}\n                            </a>\n                            <a href={track.url} className={styles.title}>\n                                {track.title}\n                            </a>\n                            <span className={styles.artist}>{track.artist}</span>\n                            <span className={styles.date}>{formatDistanceToNow(parseISO(track.date))} ago</span>\n                        </li>\n                    ))}\n                </ul>\n            ) : null}\n        </div>\n    )\n}\n","import React from 'react'\nimport Img from 'react-image'\nimport { Logo } from 'components/Icons'\nimport styles from './Spotify.module.css'\n\nexport default function TopArtists({ artists }) {\n    return (\n        <div className={styles.topArtists}>\n            <h3>Top Artists</h3>\n            {artists && artists.length ? (\n                <ul>\n                    {artists.map(artist => (\n                        <li key={artist.id}>\n                            <a href={artist.url}>\n                                <Img\n                                    src={artist.image}\n                                    alt={artist.name}\n                                    loader={\n                                        <div className={styles.placeholder}>\n                                            <Logo type=\"Spotify\" />\n                                        </div>\n                                    }\n                                />\n                            </a>\n                            <div className={styles.info}>\n                                <div className={styles.name}>{artist.name}</div>\n                                {artist.genres && artist.genres.length ? (\n                                    <div className={styles.genre}>{artist.genres.length === 1 ? artist.genres[0] : artist.genres[1]}</div>\n                                ) : null}\n                            </div>\n                        </li>\n                    ))}\n                </ul>\n            ) : null}\n        </div>\n    )\n}\n","import React, { useContext } from 'react'\nimport Img from 'react-image'\nimport { PlayContext } from './PlayContext'\nimport { PlayLogo, PauseLogo } from 'components/Icons'\nimport styles from './Spotify.module.css'\n\nexport default function TopTracks({ tracks }) {\n    const context = useContext(PlayContext)\n    return (\n        <div className={styles.topTracks}>\n            <h3>Top Tracks</h3>\n            {tracks && tracks.length ? (\n                <ul>\n                    {tracks.map(track => (\n                        <li key={track.id}>\n                            <a href={track.url} className={styles.album}>\n                                <Img src={track.image} alt={track.title} />\n                            </a>\n                            {track.preview_url && (\n                                <span\n                                    className={`${styles.playIcon} ${context.playing && context.playing === track.id ? styles.playing : ''}`}\n                                    onClick={() => {\n                                        context.onPlayTrack(track)\n                                    }}>\n                                    {context.playing && context.playing === track.id ? <PauseLogo /> : <PlayLogo />}\n                                </span>\n                            )}\n                            <a href={track.url} className={styles.name}>\n                                {track.name}\n                            </a>\n                            <span className={styles.artist}>{track.artist}</span>\n                        </li>\n                    ))}\n                </ul>\n            ) : null}\n        </div>\n    )\n}\n","import React, { useState, useEffect } from 'react'\nimport TopArtists from './TopArtists'\nimport TopTracks from './TopTracks'\nimport styles from './Spotify.module.css'\n\nexport default function Top() {\n    const [top, setTop] = useState(null)\n    const [error, setError] = useState(false)\n\n    useEffect(() => {\n        const fetchTop = async () => {\n            try {\n                const response = await fetch(`${process.env.REACT_APP_API_URL}/spotify/top`)\n                const top = await response.json()\n                setTop(top)\n            } catch (error) {\n                setError(true)\n            }\n        }\n        fetchTop()\n    }, [])\n\n    return (\n        <div className={styles.top}>\n            {error && (\n                <>\n                    <h3>Top Artists</h3>\n                    <p className={styles.error}>Unable to fetch top artists and tracks.</p>\n                </>\n            )}\n            {top ? (\n                <>\n                    <TopArtists artists={top ? top.artists : null} />\n                    <TopTracks tracks={top ? top.tracks : null} />\n                </>\n            ) : null}\n        </div>\n    )\n}\n","import React, { useState, useEffect, useRef } from 'react'\nimport Img from 'react-image'\nimport Error from 'components/Error'\nimport useUser from 'hooks/User'\nimport RecentTracks from './RecentTracks'\nimport { PlayContext } from './PlayContext'\nimport Top from './Top'\nimport styles from './Spotify.module.css'\n\nexport default function Spotify() {\n    const [user, error] = useUser('spotify')\n    const [playing, setPlaying] = useState(null)\n    let audio = useRef(new Audio())\n\n    useEffect(() => {\n        let currentAudio = audio.current\n        currentAudio.onended = () => {\n            setPlaying(null)\n        }\n\n        return () => {\n            if (currentAudio && !currentAudio.paused) {\n                currentAudio.pause()\n            }\n        }\n    }, [])\n\n    const playTrack = track => {\n        const playTrack = playing !== track.id ? track.id : null\n        setPlaying(playTrack)\n        if (!audio.current.paused) {\n            audio.current.pause()\n        }\n        if (playTrack) {\n            audio.current.setAttribute('src', track.preview_url)\n            audio.current.play()\n        }\n    }\n\n    if (error) {\n        return <Error message=\"Unable to fetch spotify profile.\" />\n    }\n\n    return (\n        <div className={styles.page}>\n            {user && (\n                <div className={styles.profile}>\n                    <a href={user.url} className={styles.picture}>\n                        <Img src={user.picture} alt=\"Spotify Profile\" />\n                    </a>\n                    <h2>{user.name}</h2>\n                </div>\n            )}\n            <PlayContext.Provider\n                value={{\n                    playing: playing,\n                    onPlayTrack: playTrack,\n                }}>\n                <RecentTracks />\n                <Top />\n            </PlayContext.Provider>\n        </div>\n    )\n}\n","import React from 'react'\nimport styles from './Error.module.css'\n\nconst Error = ({ message }) => {\n    return (\n        <div className={styles.Error}>\n            <h3>:(</h3>\n            <p>{message || 'Unable to load'}</p>\n        </div>\n    )\n}\n\nexport default Error\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Error\":\"Error_Error__3f4kP\",\"fadeIn\":\"Error_fadeIn__2G69l\"};","import { useState, useEffect } from 'react'\n\nexport default function useUser(type) {\n    const [user, setUser] = useState(null)\n    const [error, setError] = useState(false)\n\n    useEffect(() => {\n        const fetchUser = async () => {\n            try {\n                const url = `${process.env.REACT_APP_API_URL}/${type}/user`\n                const response = await fetch(url)\n                const user = await response.json()\n                setUser(user)\n            } catch (error) {\n                setError(true)\n            }\n        }\n        fetchUser()\n    }, [type])\n\n    return [user, error]\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Spotify_page__12STq\",\"error\":\"Spotify_error__2IXI_\",\"profile\":\"Spotify_profile__3XzpF\",\"picture\":\"Spotify_picture__3-mYs\",\"scaleIn\":\"Spotify_scaleIn__1Z_VD\",\"moveIn\":\"Spotify_moveIn__12IKJ\",\"moveOut\":\"Spotify_moveOut__3130A\",\"recentTracks\":\"Spotify_recentTracks__2BB_U\",\"album\":\"Spotify_album__6nidx\",\"playIcon\":\"Spotify_playIcon__2kuF5\",\"playing\":\"Spotify_playing__jJRye\",\"title\":\"Spotify_title__26viw\",\"artist\":\"Spotify_artist__2i6L1\",\"date\":\"Spotify_date__1KWzx\",\"top\":\"Spotify_top__1Y8IL\",\"topArtists\":\"Spotify_topArtists__33lkk\",\"halfScaleIn\":\"Spotify_halfScaleIn__2kM5N\",\"info\":\"Spotify_info__3urrY\",\"name\":\"Spotify_name__Xyh_D\",\"genre\":\"Spotify_genre__3nHvw\",\"placeholder\":\"Spotify_placeholder__3ZgsG\",\"rotate\":\"Spotify_rotate__2vgfE\",\"topTracks\":\"Spotify_topTracks__2ow3E\",\"timelineTracks\":\"Spotify_timelineTracks__3P0Gn\",\"fadeIn\":\"Spotify_fadeIn__1ohdH\"};"],"sourceRoot":""}